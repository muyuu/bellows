{"version":3,"sources":["bellows.min.js"],"names":["definition","moduleName","root","self","global","exports","module","require","$","isUndefined","obj","factory","param","$self","rootElement","opt","map","key","val","Module","moduleRoot","this","head","body","closeBtn","openedClass","animation","duration","startCurrent","interlocking","onOpen","onClose","onClick","onAnimateEnd","$root","$head","find","$body","$closeBtn","currentIndex","isJsAnime","hide","isCssAnime","addClass","open","setClickEvent","prototype","on","clickEventHandler","closeEventHandler","e","data","target","toggle","close","type","eq","slideDown","removeClass","slideUp","closeAll","clickElement","setCurrent","hasClass","index"],"mappings":"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","file":"bellows.min.js","sourcesContent":["(function(definition){\n    \"use strict\";\n\n    var moduleName = \"bellows\";\n\n    var root = (typeof self === \"object\" && self.self === self && self) || (typeof global === \"object\" && global.global === global && global);\n\n    if (typeof exports === \"object\") {\n        module.exports = definition(root, require(\"jquery\"));\n    } else {\n        root[moduleName] = definition(root, $);\n    }\n})(function(root, $){\n    \"use strict\";\n\n    // -------------------------------------------------------\n    // utility functions\n    // -------------------------------------------------------\n    /**\n     * judge exist function\n     * @param  {any} x anything\n     * @return {boolean}\n     */\n    function existy(x){ return x != null; }\n\n    /**\n     * judge true\n     * @param  {any} x anything\n     * @return {boolean}\n     */\n    function truthy(x){ return (x !== false) && existy(x); }\n\n    /**\n     * trim string \".\"\n     * @param  {string} string text\n     * @return {string}        cutted \".\" string\n     */\n    function trimDot(string){ return string.replace(\".\", \"\"); }\n\n    /**\n     * judge undefined\n     * @param  {any} obj anything\n     * @return {boolean}\n     */\n    function isUndefined(obj){ return obj === void 0; }\n\n\n    // -------------------------------------------------------\n    // module\n    // -------------------------------------------------------\n\n    /**\n     * module factory\n     * this module is dependent on jQuery\n     * @prop {string} rootElement default root element class or id\n     * @prop {array} instance\n     * @namespace\n     */\n    function factory(param){\n\n        var rootElement = \".js-bellows\";\n        var opt = !isUndefined(param) ? param : {};\n\n        var $self;\n        if ( !isUndefined(opt.root) ) {\n            if(opt.root instanceof $) {\n                $self = param.root;\n            } else {\n                $self = $(param.root);\n            }\n        } else {\n            $self = $(rootElement);\n        }\n\n        return $self.map(function(key, val){\n            return new Module(opt, val);\n        });\n    }\n\n\n    /**\n     * constructor\n     * @type {Function}\n     */\n    function Module(opt, moduleRoot){\n\n        // options\n        this.opt = {\n            root        : moduleRoot,\n            head        : !isUndefined(opt.head) ? opt.head : \".js-bellows__head\",\n            body        : !isUndefined(opt.body) ? opt.body : \".js-bellows__body\",\n            closeBtn    : !isUndefined(opt.closeBtn) ? opt.closeBtn : \".js-bellows__closeBtn\",\n            openedClass : !isUndefined(opt.openedClass) ? opt.openedClass : \"js-isOpen\",\n\n            animation   : !isUndefined(opt.animation) ? opt.animation : true,\n            duration    : !isUndefined(opt.duration) ? opt.duration : 400,\n\n            startCurrent: !isUndefined(opt.startCurrent) ? opt.startCurrent : null,\n            interlocking: opt.interlocking || false,\n\n            // callback\n            onOpen      : opt.onOpen || null,\n            onClose     : opt.onClose || null,\n            onClick     : opt.onClick || null,\n            onAnimateEnd: opt.onAnimateEnd || null\n        };\n\n        // elements\n        this.$root = $(moduleRoot);\n        this.$head = this.$root.find(this.opt.head);\n        this.$body = this.$root.find(this.opt.body);\n        this.$closeBtn = this.$root.find(this.opt.closeBtn);\n\n        // states\n        this.currentIndex = !isUndefined(this.opt.startCurrent) ? this.opt.startCurrent : 0;\n\n        // init\n        if (this.isJsAnime()) this.$body.hide();\n        if (this.isCssAnime()) this.$root.addClass(\"is-transition\");\n\n        if (this.opt.startCurrent !== null) this.open();\n\n        // set event\n        this.setClickEvent();\n    }\n\n\n    Module.prototype.setClickEvent = function() {\n        this.$head.on(\"click\", {module: this}, this.clickEventHandler);\n        this.$closeBtn.on(\"click\", {module: this}, this.closeEventHandler);\n    };\n    Module.prototype.clickEventHandler = function(e) {\n        var self = e.data.module;\n        var target = e.target;\n        self.toggle(target);\n        return false;\n    };\n\n    Module.prototype.closeEventHandler = function(e) {\n        var self = e.data.module;\n        self.close('end');\n        return false;\n    };\n\n    /**\n     * open body panel\n     */\n    Module.prototype.open = function(type){\n        var self = this;\n\n        this.$head.eq(this.currentIndex)\n            .addClass(this.opt.openedClass);\n\n        this.$body.eq(this.currentIndex)\n            .addClass(this.opt.openedClass);\n\n        if (this.isJsAnime()) {\n           this.$body.eq(this.currentIndex)\n               .slideDown(this.opt.duration,function(){\n                    // run callback\n                    if (type === 'end' && typeof self.opt.onAnimateEnd === 'function') self.opt.onAnimateEnd();\n               });\n        }\n        // run callback\n        if (type === 'end' && typeof self.opt.onOpen === 'function') self.opt.onOpen();\n\n        return false;\n    };\n\n\n    /**\n     * close body panel\n     * @returns {boolean}\n     */\n    Module.prototype.close = function(type){\n        var self = this;\n\n        this.$head.eq(this.currentIndex)\n            .removeClass(this.opt.openedClass);\n\n        this.$body.eq(this.currentIndex)\n            .removeClass(this.opt.openedClass);\n\n        if (this.isJsAnime()) {\n            this.$body.eq(this.currentIndex)\n                .slideUp(this.opt.duration, function(){\n                    // run callback\n                    if (type === 'end' && typeof self.opt.onAnimateEnd === 'function') self.opt.onAnimateEnd();\n                });\n        }\n\n        // run callback\n        if (type === 'end' && typeof self.onClose === 'function') self.opt.onClose();\n\n        return false;\n    };\n\n    Module.prototype.closeAll = function(type){\n        var self = this;\n\n        this.$head.removeClass(this.opt.openedClass);\n        this.$body.removeClass(this.opt.openedClass)\n            .slideUp(this.opt.duration, function(){\n                // run callback\n                if (type === 'end' && typeof self.opt.onAnimateEnd === 'function') self.opt.onAnimateEnd();\n            });\n\n        // run callback\n        if (type === 'end' && typeof self.opt.onClose === 'function') self.opt.onClose();\n\n        return false;\n    };\n\n\n    /**\n     * toggle accordion\n     * @returns {boolean}\n     */\n    Module.prototype.toggle = function(clickElement){\n\n        if (clickElement == null) clickElement = null;\n\n        this.setCurrent(clickElement);\n\n        // run callback\n        if (typeof this.opt.onClick === 'function') this.opt.onClick();\n\n        if ($(clickElement).hasClass(this.opt.openedClass)){\n            if (this.opt.interlocking) {\n                this.closeAll('end');\n            } else {\n                this.close('end');\n            }\n        } else {\n            if (this.opt.interlocking) this.closeAll();\n            this.open('end');\n        }\n\n        return false;\n    };\n\n\n    /**\n     * get current element index\n     * @return {boolean} false\n     */\n    Module.prototype.setCurrent = function(clickElement){\n        this.currentIndex = this.$head.index(clickElement);\n        return false;\n    };\n\n\n    Module.prototype.isJsAnime = function(){\n        return !!this.opt.animation && this.opt.animation !== 'css';\n    };\n\n\n    Module.prototype.isCssAnime = function(){\n        return this.opt.animation === 'css';\n    };\n\n\n    return factory;\n});\n"],"sourceRoot":"/source/"}